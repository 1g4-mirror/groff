.TH groff_font @MAN5EXT@ "@MDATE@" "groff @VERSION@"
.SH Name
groff_font \- GNU roff device and font description files
.
.
.\" ====================================================================
.\" Legal Terms
.\" ====================================================================
.\"
.\" Copyright (C) 1989-2020 Free Software Foundation, Inc.
.\"
.\" This file is part of groff (GNU roff), which is a free software
.\" project.
.\"
.\" You can redistribute it and/or modify it under the terms of the GNU
.\" General Public License as published by the Free Software Foundation,
.\" either version 2 of the License, or (at your option) any later
.\" version.
.\"
.\" You should have received a copy of the GNU General Public License
.\" along with this program.  If not, see
.\" <http://www.gnu.org/licenses/gpl-2.0.html>.
.
.
.\" Save and disable compatibility mode (for, e.g., Solaris 10/11).
.do nr *groff_groff_font_5_man_C \n[.cp]
.cp 0
.
.
.\" ====================================================================
.SH Description
.\" ====================================================================
.
.\" BEGIN Keep parallel with groff.texi node "Device and Font Files".
The
.I groff
font and output device description formats are slight
extensions of those used by AT&T device-independent
.IR troff . \" AT&T
.
In distinction to the AT&T implementation,
.I groff
lacks a binary format;
all files are text files.
.
(Plan\~9
.I troff \" Plan 9
has also abandoned the binary format.)
.
The device and font description files for a device
.I name
are stored in a directory called
.IR dev name.
.
The device description file is called
.IR DESC ,
and,
for each
.RI font\~ f
supported by the device,
a font file
.RI called\~\[lq] f \[rq],
where
.IR f \~is
usually an abbreviation of a font's name and/or style.
.
For example,
the
.B ps
(PostScript)
device has
.I groff
font description files for Times roman
.RB ( TR )
and Zapf Chancery Medium italic
.RB ( ZCMI ),
among many others,
while the
.B utf8
device
(for terminal emulators)
has only font descriptions for the roman,
italic,
bold,
and bold-italic styles
.RB ( R ,
.BR I ,
.BR B ,
and
.BR BI ,
respectively).
.
.
.\" ====================================================================
.SH "\f[I]DESC\f[] file format"
.\" ====================================================================
.
The
.I DESC
file can contain the following types of line as shown below.
.
Later entries in the file override previous values.
.
.
.P
Empty lines are ignored.
.
.
.TP
.B charset
This line and everything following in the file are ignored.
.
It is allowed for the sake of backwards compatibility.
.
.
.TP
.BI family\~ fam
The default font family is
.IR fam .
.
.
.TP
.BI fonts\~ "n F1 F2"\~\c
.RI .\|.\|.\&\~ Fn
Fonts
.IR F1 ", \|.\|.\|., " Fn
are mounted in the font positions
.IR m "\|+\|1, \|.\|.\|., " m \|+\| n
where
.I m
is the number of styles.
.
This command may extend over more than one line.
.
A font name of
.RB of\~ 0
causes no font to be mounted on the corresponding font position.
.
.
.TP
.BI hor\~ n
The horizontal resolution is
.IR n \~machine
units.
.
.
.
.TP
.BI image_generator\~ string
Specify the program used to generate PNG images from PostScript input;
needed for
.I \%grohtml
only.
.
Under GNU/Linux this is usually
.IR gs (1)
but under other systems
(notably Cygwin)
it might be set to another name.
.
.
.TP
.BI paperlength\~ n
The physical vertical dimension of the output medium in basic units.
.
This isn't used by
.I \%@g@troff
itself,
but by output devices.
.
Deprecated.
.
Use
.B papersize
instead.
.
.
.TP
.BI papersize\~ string
Select a paper size.
.
Valid values of
.I string
are the ISO and DIN formats
.BR A0 \[en] A7 ,
.BR B0 \[en] B7 ,
.BR C0 \[en] C7 ,
and
.BR D0 \[en] D7 ;
.\" XXX: tmac/papersize.tmac does not support [ABCD]7.
the U.S.\& formats
.BR letter ,
.BR legal ,
.BR tabloid ,
.BR ledger ,
.BR statement ,
and
.BR executive ;
and the envelope formats
.BR com10 ,
.BR monarch ,
and
.BR DL .
.
Case is not significant for
.I string
if it holds predefined paper types.
.
Alternatively,
.I string
can be a file name
(e.g.,
.IR /etc/papersize );
if the file can be opened,
.I \%@g@troff
reads the first line and tests for the above paper sizes.
.
Finally,
.I string
can be a custom paper size in the format
.IB length , width
(with no spaces before or after the comma).
.
Both
.I length
and
.I width
must have a unit appended;
valid values are \[lq]i\[rq] for inches,
\[lq]c\[rq] for centimeters,
\[lq]p\[rq] for points,
and \[lq]P\[rq] for picas.
.
Example:
.BR 12c,235p .
.
An argument which starts with a digit is always treated as a custom
paper format.
.
.B papersize
sets both the vertical and horizontal dimensions of the output medium.
.
.
.IP
More than one argument can be specified;
.I \%@g@troff
scans from left to right and uses the first valid paper specification.
.
.
.TP
.BI paperwidth\~ n
The physical horizontal dimension of the output medium in basic units.
.
This isn't used by
.I \%@g@troff
itself,
but by output devices.
.
Deprecated.
.
Use
.B papersize
instead.
.
.
.TP
.B pass_filenames
Make
.I \%@g@troff
tell the driver the source file name being processed.
.
This is achieved by another tcommand:
.BR F \~\c
.IR filename .
.
.TP
.BI postpro\~ program
Use
.I program
as the postprocessor.
.
.
.TP
.BI prepro\~ program
Call
.I program
as a preprocessor.
.
.
.TP
.BI print\~  program
Use
.I program
as the spooler program for printing.
.
If omitted,
the
.B \-l
and
.B \-L
options of
.I groff
are ignored.
.
.
.TP
.BI res\~ n
There are
.I n
machine units per inch.
.
.
.TP
.BI sizes\~ "s1 s2"\~\c
.RI .\|.\|.\&\~ sn\~\c
.B 0
This means that the device has fonts at
.IR s1 ,
.IR s2 ,
\&.\|.\|.,
.I sn
scaled points.
.
The list of sizes must be terminated by
.RB a\~ 0 .
.
Each
.I si
can also be a range of sizes
.IR m \[en] n .
.
The list can extend over more than one line.
.
.
.TP
.BI sizescale\~ n
The scale factor for point sizes.
.
By default this has a value of\~1.
.
One
.I
scaled point
is equal to
one
.RI point\|/\| n .
.
The arguments to the
.B unitwidth
and
.B sizes
commands are given in scaled points.
.
.
.TP
.BI styles\~ "S1 S2"\~\c
.RI .\|.\|.\&\~ Sm
The first
.I m
font positions are associated with styles
.IR S1 ,
\&.\|.\|.,
.IR Sm .
.
.
.TP
.B tcommand
This means that the postprocessor can handle the
.B t
.RB and\~ u
output commands.
.
.
.TP
.B unicode
Indicate that the output device supports the complete Unicode
repertoire.
.
Useful only for devices which produce
.I character entities
instead of glyphs.
.
.
.IP
If
.B unicode
is present,
no
.B charset
section is required in the font description files since the Unicode
handling built into
.I groff
is used.
.
However,
if there are entries in a
.B charset
section,
they either override the default mappings for those particular
characters or add new mappings
(normally for composite characters).
.
.IP
This is used for
.BR \-Tutf8 ,
.BR \-Thtml ,
and
.BR \-Txhtml .
.
.
.TP
.BI unitwidth\~ n
Quantities in the font files are given in machine units
for fonts whose point size is
.IR n \~scaled
points.
.
.
.TP
.B unscaled_charwidths
Make the font handling module always return unscaled glyph widths.
.
Needed for the
.I \%grohtml
device.
.
.
.TP
.B use_charnames_in_special
This command indicates that
.I \%@g@troff
should encode named glyphs inside special commands.
.
.
.TP
.BI vert\~ n
The vertical resolution is
.IR n \~machine
units.
.
.
.P
The
.BR res ,
.BR unitwidth ,
.BR fonts ,
and
.B sizes
lines are compulsory.
.
Not all commands in the
.I DESC
file are used by
.I \%@g@troff
itself;
some of the keywords
(or even additional ones)
are used by postprocessors to store arbitrary information about the
device.
.
.
.P
Here a list of obsolete keywords which are recognized by
.I groff
but completely ignored:
.BR spare1 ,
.BR spare2 ,
.BR biggestfont .
.
.
.\" ====================================================================
.SH "Font description file format"
.\" ====================================================================
.
A font file has two sections;
empty lines are ignored in both of them.
.
.
.P
The first section is a sequence of lines each containing a sequence of
blank delimited words;
the first word in the line is a key,
and
subsequent words give a value for that key.
.
.
.TP
.BI ligatures\~ "lig1 lig2"\~\c
.RI .\|.\|.\&\~ lign\~\c
.RB [ 0 ]
Glyphs
.IR lig1 ,
.IR lig2 ,
\&.\|.\|.,
.I lign
are ligatures;
possible ligatures are
.BR ff ,
.BR fi ,
.BR fl ,
.BR ffi ,
and
.BR ffl .
.
For backwards compatibility,
the list of ligatures may be terminated with
.RB a\~ 0 .
.
The list of ligatures may not extend over more than one line.
.
.
.TP
.BI "name " F
The name of the font is\~\c
.IR F .
.
.
.TP
.BI "slant " n
The glyphs of the font have a slant of
.IR n \~\c
degrees.
.
(Positive means forward.)
.
.
.TP
.BI "spacewidth "  n
The normal width of a space is\~\c
.IR n .
.
.
.TP
.B special
The font is
.IR special ;
this means that when a glyph is requested that is not present in
the current font,
it is searched for in any special fonts that are mounted.
.
.
.P
Other commands are ignored by
.I \%@g@troff
but may be used by postprocessors to store arbitrary information
about the font in the font file.
.
.
.P
The first section can contain comments which start with the
.B #
character and extend to the end of a line.
.
.
.P
The second section contains one or two subsections.
.
It must contain a
.I charset
subsection
and it may also contain a
.I kernpairs
subsection.
.
These subsections can appear in any order.
.
Each subsection starts with a word on a line by itself.
.
.
.P
The word
.B charset
starts the charset subsection.
.
The
.B charset
line is followed by a sequence of lines.
.
Each line gives information for one glyph.
.
A line comprises a number of fields separated
by blanks or tabs.
.
The format is
.
.IP
.I name metrics type code
.RI [ entity_name ]
.RB [ \-\-
.IR comment ]
.
.
.P
.I name
identifies the glyph:
if
.I name
is a single
.RI glyph\~ c ,
then it corresponds to the
.I groff
input
.RI character\~ c ;
if it is of the form
.BI \[rs] c
where
.IR c \~is
a single character,
then it corresponds to the special character
.BI \[rs][ c ]\c
;
otherwise it corresponds to the
.I groff
input character
.BI \[rs][ name ]\c
\&.
.
If it is exactly two characters
.I xx
it can be entered as
.BI \[rs]( xx\c
\&.
.
Note that single-letter special characters can't be accessed as
.BI \[rs] c\c
;
the only exception is \[lq]\[rs]\-\[rq] which is identical to
\[lq]\[rs][\-]\[rq].
.
The name
.B \-\-\-
is special and indicates that the glyph is unnamed;
such glyphs can only be used by means of the
.B \[rs]N
escape sequence in
.IR troff . \" generic; \N is portable
.
.
.P
The
.I metrics
field has the form
(on one line;
it may be broken here for the sake of readability):
.
.
.IP
.I width\/\c
.RI [\fB, \:height\/\c
.RI [\fB, \:depth\/\c
.RI [\fB, \:\%italic-correction\/\c
.RI [\fB, \:\%left-italic-correction\/\c
.RI [\fB, \:\%subscript-correction ]]]]]
.
.
.P
There must not be any spaces between these subfields.
.
Missing subfields are assumed to be\~0.
.
The subfields are all decimal integers.
.
Since there is no associated binary format,
these values are not required to fit into a variable of type
.B char
as they are in ditroff.
.
The
.I width
subfields gives the width of the glyph.
.
The
.I height
subfield gives the height of the glyph
(upwards is positive);
if a glyph does not extend above the baseline,
it should be given a zero height,
rather than a negative height.
.
The
.I depth
subfield gives the depth of the glyph,
that is,
the distance below the baseline to which the glyph extends
(downwards is positive);
if a glyph does not extend below the baseline,
it should be given a zero depth,
rather than a negative depth.
.
The
.I italic-correction
subfield gives the amount of space that should be added after the
glyph when it is immediately to be followed by a glyph
from a roman font.
.
The
.I left-italic-correction
subfield gives the amount of space that should be added before the
glyph when it is immediately to be preceded by a glyph
from a roman font.
.
The
.I subscript-correction
gives the amount of space that should be added after a glyph
before adding a subscript.
.
This should be less than the italic correction.
.
.
.P
The
.I type
field gives the glyph type:
.
.
.TP
1
means the glyph has a descender,
for example,
\[lq]p\[rq];
.
.
.TP
2
means the glyph has an ascender,
for example,
\[lq]b\[rq];
.
.
.TP
3
means the glyph has both an ascender and a descender,
for example,
\[lq](\[rq].
.
.
.P
The
.I code
field gives the code which the postprocessor uses to print the glyph.
.
The glyph can also be input to groff using this code by means of the
.B \[rs]N
escape sequence.
.
The code can be any integer.
.
If it starts with
.RB a\~ 0
it is interpreted as octal;
if it starts with
.B 0x
or
.B 0X
it is interpreted as hexadecimal.
.
Note,
however,
that the
.B \[rs]N
escape sequence only accepts a decimal integer.
.
.
.P
The
.I entity_name
field defines a string identifying the glyph which the postprocessor
uses to print that glyph.
.
This field is optional and is used by
.I grops
to build sub-encoding arrays for PostScript fonts containing more than
256 glyphs.
.
(It was formerly used for
.IR \%grohtml 's
entity names,
but for efficiency reasons these data are now compiled directly into
.IR \%grohtml .)
.
.
.P
Anything on the line after the encoding field or
.RB \[lq] \-\- \[rq]
is ignored.
.
.
.P
A line in the charset section can also have the format
.
.
.IP
.IB name\~ \[dq]
.
.
.P
This indicates that
.I name
is just another name for the glyph mentioned in the
preceding line.
.
.
.P
The word
.B kernpairs
starts the kernpairs section.
.
This contains a sequence of lines of the form:
.
.
.IP
.I c1 c2 n
.
.
.P
This means that when glyph
.I c1
appears next to glyph
.I c2
the space between them should be increased
.RI by\~ n .
.
Most kerning pairs should have a negative value
.RI for\~ n .
.\" END Keep parallel with groff.texi node "Device and Font Files".
.
.
.\" ====================================================================
.SH Files
.\" ====================================================================
.
.TP
.IR @FONTDIR@/dev name /DESC
describes the output device
.IR name .
.
.
.TP
.IR @FONTDIR@/dev name / F
describes the font known to
.I \%@g@troff
.RI as\~ F
on device
.IR name .
.
.
.\" ====================================================================
.SH "See also"
.\" ====================================================================
.
.IR "Groff: The GNU Implementation of troff" ,
by Trent A.\& Fisher and Werner Lemberg,
is the primary
.I groff
manual.
.
You can browse it interactively with \[lq]info groff\[rq].
.
.
.P
\[lq]Troff User's Manual\[rq]
by Joseph F.\& Ossanna,
1976
(revised by Brian W.\& Kernighan,
1992),
AT&T Bell Laboratories Computing Science Techical Report No.\& 54,
widely called simply \[lq]CSTR\~#54\[rq],
documents the language,
device and font description file formats,
and device-independent output format
referred to collectively in
.I groff
documentation as
.RI \[lq]AT&T\~ troff \[rq].
.
.
.P
\[lq]A Typesetter-independent TROFF\[rq]
by Brian W.\& Kernighan,
1982,
AT&T Bell Laboratories Computing Science Techical Report No.\& 97,
provides additional insights into the
device and font description file formats
and device-independent output format.
.
.
.P
Section \[lq]See also\[rq] of
.IR groff (@MAN1EXT@)
lists utilities available for preparing font files in a variety of
formats for use with
.I groff
output drivers.
.
.
.P
.IR groff_out (@MAN5EXT@),
.IR \%@g@troff (@MAN1EXT@),
.IR \%addftinfo (@MAN1EXT@)
.
.
.\" Restore compatibility mode (for, e.g., Solaris 10/11).
.cp \n[*groff_groff_font_5_man_C]
.do rr *groff_groff_font_5_man_C
.
.
.\" Local Variables:
.\" fill-column: 72
.\" mode: nroff
.\" End:
.\" vim: set filetype=groff textwidth=72:
